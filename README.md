#基于微博文本分析的用户画像分析
##目的
由于本次作业数据的局限性，能分析的用户只有时间，微博内容。通过对文本分析的给用户打上标签。

##环境搭建
###数据库
mongodb 3.2.x
下载安装:https://docs.mongodb.com/master/installation/
>
1.如果已经安装，可用mongod -version查看版本
2.想用gui的话可用robomongo，地址:https://robomongo.org/
3.mongodb数据导入导出教程:http://chenzhou123520.iteye.com/blog/1641319


### 开发环境
- 语言： java 1.8
- IDE： Inteilij IDEA 2016.01
- 依赖库：
   - 自然语言处理工具-HanNLP:https://github.com/hankcs/HanLP
   - mongodb driver:https://docs.mongodb.com/ecosystem/drivers/java/



##流程
### 预处理
####简单预处理
1. 原数据csv格式
源文件 data_new.csv， 数据量60W

2. 提取有效属性(id,content,time,user),存入mongodb，之后一条微博信息如下格式如下
  ```json
{
    "id" : 600357,
    "content" : "#上海微整形#你若许我不离不弃，@男神整形医生铭昊 ，我定许你地久天长。花绽流年，芭比眼，鼻综合，自体脂肪填[微笑]充，情事摇曳，今生我愿为你舒展广袖，假体隆胸隆鼻留幽香于袖底，在楼榭上，水岸边，清幽处，倾尽舞步，舞尽岁月娉婷，舞尽流年芳菲。",
    "time" : "2016/3/16 17:45",
    "user" : "qetina"
}
  ```

3. 坏数据清洗
删除无名数据，如现在数据内部有2567条用户名是"#NAME？"，也就是无名用户的删除

4. 相同用户整合
统计出用户的微博集和活动时间集，样例如下
  ```json
{
    "user" : "niglBBy",
    "contents" : [
        "胡歌上海旅游形象大使。四季上海，天天精彩。 .....",
        "谁粉我我立马粉水！ 【原微博】 @Alina童颜-微整形 不要为明天忧虑，因为明天自有明天的忧虑；一天的难处担当就够了。而我们大人整天都强迫孩子去做一些事情。#上海微整形#却从来没有问过他们快乐不快乐，原来真正蒙在鼓里的是我们",
        "来自星星的微博[心] 【原微博】 @Alina童颜-微整形 不要为明天忧虑，因为明天自有明天的忧虑；一天的难处担当就够了。而我们大人整天都强迫孩子去做一些事情。#上海微整形#却从来没有问过他们快乐不快乐，原来真正蒙在鼓里的是我们",
        "胡歌上海旅游形象大使。四季上海，天天精彩。 【原微博】 #晒春游逛上海#樱花、桃花、郁金香、油菜花，看不尽的花；公园、马路、古镇，逛不完的景；青团、烧卖、春笋、刀鱼面，吃不完的美食……还不跟我一起去春游？@乐游上海"
    ],
    "times" : [
        "2016/3/22 10:55",
        "2016/3/22 10:53",
        "2016/3/22 10:52",
        "2016/3/22 10:52"
    ],
    "count" : 4
}
  ```

5. 活跃用户筛选
因为是做用户画像，那些发表数量少的用户无法准确添加标签，所以筛选了在该数据时间段内的发表微博数在10以上的用户，一共9950名用户。
到这一步完成的数据在百度云链接: http://pan.baidu.com/s/1miCORJ6 密码: gzva
**一共9950条数据，如果出现数据爆内存了（自动断了链接），请在import语句最后加上 --batchSize 1,就能导入成功了**

6. 文本分词 （以下均是未完成内容）
提取微博内容中的名词和实体，然后形容词
如果可以的话，要得到每个实体的比重
- topic分词
  ```json
{
    "_id" : ObjectId("5730b94d0450e85a4f3ffc69"),
    "user" : "A__SIQI",
    "keyword" : [
        "额头",
        "单眼皮",
        "下巴",
        "开眼角",
        "微博",
        "医院",
        "上海",
        "时间",
        "江水",
        "苹果",
        "芭比",
        "微整形",
        "无痕"
    ],
    "topic" : [
        "李易峰 宋仲基",
        "南京无锡常州扬州苏州上海微整形",
        "上海微整形",
        "上海整形美容医疗医院",
        "王思聪女友",
        "2016年流行发色",
        "隆鼻",
        "太阳的后裔结局",
        "上海北京西安榆林南昌长沙宝鸡咸阳微整形",
        "上海婚纱照"
    ]
}
  ```

### 基于分析的处理


### 分析维度

根据群体性结果，制定标签，然后再分配的过程。应对需求。

#### 自然属性
显然是无法分析

#### 性格分析
根据形容用词和性格用词的近似度去匹配。领域用词需要自己去调。

#### 兴趣/话题分析
根据名词和领域名词的近似度去匹配。与性格类似。

#### 时间作息分析
根据每个人时间段的密度

#### 角色分析
区分转发狂魔和发布者，依靠数量统计,


### 准确度

### 群体性行为和个体性行为差异

### 应用

# 参考链接
如何构建用户画像- 概述 - http://www.woshipm.com/pmd/107919.html
新手如何开始用户画像分析 - https://www.zhihu.com/question/29468464
可视化工具推荐 - https://www.zhihu.com/question/31429786
